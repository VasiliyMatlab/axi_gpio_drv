# AXI GPIO Driver

Данный драйвер представляет из себя статическую библиотеку для baremetall-программ. Драйвер предоставляет API для управления IP-ядром <a href="https://docs.xilinx.com/v/u/1.01b-English/ds744_axi_gpio">AXI GPIO v1.01.b</a>.

### Заметки:  
- ширина шины данных - 32 бита (C_GPIO_WIDTH = C_GPIO2_WIDTH = 32)
- присутствует контроллер прерываний (C_INTERRUPT_PRESENT = 1)
- драйвер написан с учетом того, что используются два канала (C_IS_DUAL = 1)
- первый канал используется только для чтения, а второй - только для записи

### Требования
- glibc
- gcc
- make  
Установить необходимые программы можно командой: `sudo apt install build-essential`

### Сборка библиотеки драйвера
Открыть командную оболочку (shell) и выполнить указанные команды:  
```bash
git clone https://github.com/VasiliyMatlab/axi_gpio_drv.git
cd axi_gpio_drv/
make
```
Если драйвер предназначен для другой архитектуры (кросскомпиляция), то вместо последнего действия стоит выполнить: `make PREFIX=<your_target_arch>`. Например, компиляция под архитектуру ARM будет выглядеть следующим образом: `make PREFIX=arm-none-eabi-`.

### Использование
В результате сборки будет создана директория `lib`, где будет лежать статическая библиотека `libaxi_gpio.a`. Данную статическую библиотеку можно скопировать в свой проект и добавить флаг при линковке: `-laxi_gpio`.

### ToDo list:
- реализовать возможность включения/отключения прерываний
- учесть, что длина шины данных может быть от 1 до 32 бит
- добавить возможность использовать только один канал
- реализовать механизм, при котором в каждом канале пины могут быть сконфигурированы как чтение, так и на запись

***
<p align="center"><a href="https://github.com/VasiliyMatlab"><img src="https://github.com/VasiliyMatlab.png" width="100" alt="VasiliyMatlab" /></a></p>
<p align="center"><a href="https://github.com/VasiliyMatlab" style="color: #000000">VasiliyMatlab</a></p>
